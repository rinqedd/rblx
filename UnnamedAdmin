--// Instances:

if game.CoreGui:FindFirstChild("UnnamedAdmin") then
    game.CoreGui:FindFirstChild("UnnamedAdmin"):Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
local CommandBar = Instance.new("Frame")
local CommandBarRound = Instance.new("UICorner")
local CommandText = Instance.new("TextBox")
local CommandTextRound = Instance.new("UICorner")

--// Properties:

ScreenGui.Name = "UnnamedAdmin"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

CommandBar.Name = "CommandBar"
CommandBar.Parent = ScreenGui
CommandBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
CommandBar.BackgroundTransparency = 0.6
CommandBar.BorderSizePixel = 0
CommandBar.Position = UDim2.new(0.310398757, 0, 0.468606472, 0)
CommandBar.Size = UDim2.new(0.379202515, 0, 0.0612557419, 0)
CommandBar.Visible = false

CommandBarRound.CornerRadius = UDim.new(0, 100)
CommandBarRound.Name = "CommandBarRound"
CommandBarRound.Parent = CommandBar

CommandText.Name = "CommandText"
CommandText.Parent = CommandBar
CommandText.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
CommandText.BackgroundTransparency = 0.600
CommandText.Position = UDim2.new(0.0144031672, 0, 0.15, 0)
CommandText.Size = UDim2.new(0.973195791, 0, 0.7, 0)
CommandText.Font = Enum.Font.Code
CommandText.PlaceholderText = "Type cmds for a list of commands"
CommandText.Text = ""
CommandText.TextColor3 = Color3.fromRGB(255, 255, 255)
CommandText.TextSize = 20
CommandText.TextWrapped = true

CommandTextRound.CornerRadius = UDim.new(0, 100)
CommandTextRound.Name = "CommandTextRound"
CommandTextRound.Parent = CommandText

--// Instances:

local CommandList = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local CommandListText = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local UIPadding = Instance.new("UIPadding")
local Frame = Instance.new("Frame")
local Command = Instance.new("TextLabel")

--// Properties:

CommandList.Name = "CommandList"
CommandList.Parent = ScreenGui
CommandList.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
CommandList.BackgroundTransparency = 0.600
CommandList.BorderSizePixel = 0
CommandList.Position = UDim2.new(0.310398728, 0, 0.542113364, 0)
CommandList.Size = UDim2.new(0.379202545, 0, 0.442572683, 0)
CommandList.Visible = false

UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = CommandList

CommandListText.Name = "CommandListText"
CommandListText.Parent = CommandList
CommandListText.Active = true
CommandListText.AutomaticCanvasSize = "Y"
CommandListText.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
CommandListText.BackgroundTransparency = 1.000
CommandListText.BorderColor3 = Color3.fromRGB(0, 0, 0)
CommandListText.BorderSizePixel = 0
CommandListText.Position = UDim2.new(0.0124099441, 0, 0.0207612477, 0)
CommandListText.Size = UDim2.new(0.973111928, 0, 0.958477497, 0)
CommandListText.CanvasSize = UDim2.new(0, 0, 0, 0)

UIListLayout.Parent = CommandListText
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

UIPadding.Parent = CommandListText

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame.BackgroundTransparency = 1.000

Command.Name = "Command"
Command.Parent = Frame
Command.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Command.BackgroundTransparency = 1.000
Command.Position = UDim2.new(0, 0, 0, 0)
Command.Size = UDim2.new(0, 460, 0, 30)
Command.Font = Enum.Font.Code
Command.Text = ""
Command.TextColor3 = Color3.fromRGB(255, 255, 255)
Command.TextSize = 20
Command.TextXAlignment = Enum.TextXAlignment.Left

--// ESP Library:

local ESPLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/rinqedd/rblx/main/Libs/ESP%20Library"))()

--// Variables:

local Players = game.Players
local LPlayer = game.Players.LocalPlayer
LCharacter = LPlayer.Character or LPlayer.CharacterAdded:Wait()
LPlayer.CharacterAdded:Connect(function(NewCharacter)
	wait()
	LCharacter = NewCharacter
end)
local Mouse = LPlayer:GetMouse()

local queue_teleport = syn and syn.queue_on_teleport or queue_on_teleport or fluxus and fluxus.queue_on_teleport

LPlayer.OnTeleport:Connect(function(State)
    if State == Enum.TeleportState.Started then
        if queue_teleport then
            queue_teleport("loadstring(game:HttpGet(\"https://raw.githubusercontent.com/rinqedd/rblx/main/UnnamedAdmin\", true))()")
        end
    end
end)

local CmdBar = CommandBar
local CmdText = CommandText

local Prefix = ";"
local Commands = {}

--// Functions:

function RandStr()
	local Length = math.random(10,20)
	local Array = {}
	for i = 1, Length do
		Array[i] = string.char(math.random(32, 126))
	end
	return table.concat(Array)
end

function Notify(Header,Desc)
    game:GetService("StarterGui"):SetCore("SendNotification",{
    	Title = Header,
    	Text = Desc
    })
end

function CheckR15(Player)
    if Player.Character.Humanoid.RigType == Enum.HumanoidRigType.R15 then
        return true
    end
end

function GetRoot(Character)
	local Root
	if Character then
		Root = Character:FindFirstChild("HumanoidRootPart") or Character:FindFirstChild("Torso")
	end

	return Root
end

function GetPlrFromName(Name)
    local IsName
    Name = Name:lower()
    
	for i,v in pairs(Players:GetPlayers()) do
		if v.Name:lower():match("^"..Name) then
			IsName = v.Name
			break
		end
	end

	return IsName
end

function AddCmd(Name,Example,Function)
    if type(Name) == "string" then
        Name = {Name}
    end
    for i,Cmd in pairs(Name) do
        if i == 1 then
        	Commands[Cmd] = {
    	        EXAMPLE = Example,
        	    FUNC = Function,
        	    ALIAS = false
        	}
        else
            Commands[Cmd] = {
    	        EXAMPLE = Example,
        	    FUNC = Function,
        	    ALIAS = true
        	}
        end
    end
end

function RunCmd(Cmd,Args)
    Commands[Cmd]["FUNC"](unpack(Args))
end

CmdText.FocusLost:Connect(function()
	local Split = string.split(CmdText.Text," ")
	local Cmd = Split[1]:lower()
	local Args = {}
	for i,v in pairs(Split) do
	    if i ~= 1 then
	        table.insert(Args,v)
	    end
	end
	CmdBar.Visible = false
	CommandList.Visible = false
	if Commands[Cmd] then
	    RunCmd(Cmd,Args)
	end
end)

Mouse.KeyDown:Connect(function(Key)
	if (Key==Prefix) then
		CmdBar.Visible = true
		CommandList.Visible = true
        CmdText:CaptureFocus()
            spawn(function()
			repeat CmdText.Text = '' until CmdText.Text == ''
		end)
	end
end)

getgenv().Flying = false
getgenv().Gyro = nil
getgenv().Vel = nil

local ControlModule = require(LPlayer.PlayerScripts.PlayerModule):GetControls()
local Camera = game.Workspace.CurrentCamera

function Fly()
    for _,Part in pairs(LCharacter:GetChildren()) do
		if Part:IsA("BasePart") then
			Part.CanCollide = true
		end
	end
	
	Gyro = Instance.new("BodyGyro")
	Gyro.maxTorque = Vector3.new(10000, 10000, 10000)
	Gyro.P = 10000
	Vel = Instance.new("BodyVelocity")
	Vel.maxForce = Vector3.new(10000, 10000, 10000)
	Vel.P = 10000
	Gyro.Name = RandStr()
	Vel.Name = RandStr()
	Gyro.Parent = GetRoot(LCharacter)
	Vel.Parent = GetRoot(LCharacter)
	Gyro.CFrame = GetRoot(LCharacter).CFrame
	Vel.Velocity = Vector3.new()

    local Movements = {
    	Forward = 0,
    	Backward = 0,
    	Right = 0,
    	Left = 0
    }
    
    local FlyConn = game:GetService("RunService").RenderStepped:Connect(function()
    	if Flying then
    		if ControlModule:GetMoveVector().X >= 0.1 and ControlModule:GetMoveVector().X <= 1.9 then
    			Movements.Right = 1
    		else
    			Movements.Right = 0
    		end
    		if ControlModule:GetMoveVector().Z >= 0.1 and ControlModule:GetMoveVector().Z <= 1.9 then
    			Movements.Backward = 1
    		else
    			Movements.Backward = 0
    		end
    		if ControlModule:GetMoveVector().X <= -0.1 and ControlModule:GetMoveVector().X >= -1.9 then
    			Movements.Left = 1
    		else
    			Movements.Left = 0
    		end
    		if ControlModule:GetMoveVector().Z <= -0.1 and ControlModule:GetMoveVector().Z >= -2.499 then
    			Movements.Forward = 1
    		else
    			Movements.Forward = 0
    		end
    		local CameraCFrame = Camera.CFrame
    		Gyro.CFrame = CameraCFrame
    		local Dist = CameraCFrame.rightVector * (Movements.Right - Movements.Left) + CameraCFrame.lookVector * (Movements.Forward - Movements.Backward)
    		if Dist:Dot(Dist) > 0 then
    			Dist = Dist.unit
    		end
    		Vel.Velocity = Dist * 60
    	end
    end)
    Vel.Parent.ChildRemoved:Connect(function(IsVel)
        if IsVel == Vel then
            FlyConn:Disconnect()
            Flying = false
        end
    end)
    Flying = true
end

function Unfly()
    for _,Part in pairs(LCharacter:GetChildren()) do
	if Part:IsA("BasePart") then
		Part.CanCollide = false
	end
    end
    if Gyro and Vel then
        Gyro:Destroy()
        Vel:Destroy()
        Gyro = nil
        Vel = nil
    end
end

AddCmd({"fly"},"",function()
    Fly()
end)

AddCmd({"unfly"},"",function()
    Unfly()
end)

getgenv().Float = false
getgenv().FloatPart = nil

AddCmd({"float","platform"},"",function()
    if Float then return Notify("Float","You already have float enabled.") end
    FloatPart = Instance.new("Part",LCharacter)
    FloatPart.Name = RandStr()
    FloatPart.Parent = LCharacter
    FloatPart.Transparency = 0
    FloatPart.Size = Vector3.new(5,1,5)
    FloatPart.Anchored = true
    getgenv().FloatValue = -3.5
    if CheckR15(LPlayer) then
        FloatValue = -3.65
    end
    getgenv().Up = false
    getgenv().Down = false
    FloatDown = Mouse.KeyDown:Connect(function(Key)
        if Key == "e" then
            Up = true
            spawn(function()
                repeat task.wait()
                    pcall(function()
                        FloatPart.CFrame = FloatPart.CFrame * CFrame.new(0,0.5,0) 
                    end)
                until not Up
            end)
        elseif Key == "q" then
            Down = true
            spawn(function()
                repeat task.wait()
                    pcall(function()
                        FloatPart.CFrame = FloatPart.CFrame * CFrame.new(0,-0.5,0)
                    end)
                until not Down
            end)
        end
    end)
    FloatUp = Mouse.KeyUp:Connect(function(Key)
        if Key == "e" then
            Up = false
        elseif Key == "q" then
            Down = false
        end
    end)
    Float = true
    repeat task.wait() 
        pcall(function()
            if Float then
                FloatPart.CFrame = GetRoot(LCharacter).CFrame * CFrame.new(0,FloatValue,0) 
            end
        end)
    until not Float or LCharacter.Humanoid.Health == 0
    print("end")
    Float = false
    if FloatPart then
        FloatUp:Disconnect()
        FloatDown:Disconnect()
        FloatPart:Destroy()
    end
end)

AddCmd({"unfloat","unplatform"},"",function()
    Float = false
    FloatPart:Destroy()
    FloatPart = nil
end)

AddCmd("goto","[username] (e.g exampleUser123)",function(Player)
    local Target = Players[GetPlrFromName(Player)]
    if Target then
        Player = Target
    end
    pcall(function()
	    GetRoot(LCharacter).CFrame = GetRoot(Player.Character).CFrame
	end)
end)

AddCmd({"locate","playeresp","espplayer"},"[username or 'all']",function(Player)
    if Player == "all" then
        for _,Plr in pairs(Players:GetPlayers()) do
            ESPLib:PlayerESP(Plr,true,true)
        end
    else
        local Plr = Players[GetPlrFromName[Player]]
        ESPLib:PlayerESP(Plr.Name,true,true)
    end
end)

AddCmd({"unlocate","playeresp","espplayer"},"[username or 'all']",function(Player)
    if Player == "all" then
        for _,Plr in pairs(Players:GetPlayers()) do
            ESPLib:RemovePlayerESP(Plr)
        end
    else
        local Plr = Players[GetPlrFromName[Player]]
        ESPLib:RemovePlayerESP(Plr)
    end
end)

AddCmd("noclip","",function()
    for _,Part in pairs(LCharacter:GetChildren()) do
        if Part:IsA("BasePart") then
            Part.CanCollide = false
        end
    end
end)

AddCmd({"unnoclip","clip"},"",function()
    for _,Part in pairs(LCharacter:GetChildren()) do
        if Part:IsA("BasePart") then
            Part.CanCollide = true
        end
    end
end)

AddCmd({"discord","afterglow"},"",function()
    local Request = syn and syn.request or http and http.request or http_request or fluxus and fluxus.request or getgenv().request or request
	HTTPServ = game.HttpService
	if Request then
		Request({
			Url = 'http://127.0.0.1:6463/rpc?v=1',
			Method = 'POST',
			Headers = {
				['Content-Type'] = 'application/json',
				Origin = 'https://discord.com'
			},
			Body = HTTPServ:JSONEncode({
				cmd = 'INVITE_BROWSER',
				nonce = HTTPServ:GenerateGUID(false),
				args = {code = 'FaDKXB6BTZ'}
			})
		})
	end
end)

AddCmd({"rejoin","rj"},"",function()
    if #Players:GetPlayers() <= 1 then
        game.TeleportService:Teleport(game.PlaceId,LPlayer)
    else
        game.TeleportService:TeleportToPlaceInstance(game.PlaceId,game.JobId,LPlayer)
    end
end)

AddCmd("nolimbs","",function()
    if CheckR15(LPlayer) then
        for _,Limb in pairs(LCharacter:GetChildren()) do
            if Limb:IsA("BasePart") and (Limb.Name == "RightUpperLeg" or Limb.Name == "LeftUpperLeg" or Limb.Name == "RightUpperArm" or Limb.Name == "LeftUpperArm") then
                Limb:Destroy()
            end
        end
    else
        for _,Limb in pairs(LCharacter:GetChildren()) do
            if Limb:IsA("BasePart") and (Limb.Name == "Right Leg" or Limb.Name == "Left Leg" or Limb.Name == "Right Arm" or Limb.Name == "Left Arm") then
                Limb:Destroy()
            end 
        end
    end
end)

AddCmd({"nolegs","deletelegs"},"",function()
    if CheckR15(LPlayer) then
        for _,Limb in pairs(LCharacter:GetChildren()) do
            if Limb:IsA("BasePart") and (Limb.Name == "RightUpperLeg" or Limb.Name == "LeftUpperLeg") then
                Limb:Destroy()
            end
        end
    else
        for _,Limb in pairs(LCharacter:GetChildren()) do
            if Limb:IsA("BasePart") and (Limb.Name == "Right Leg" or Limb.Name == "Left Leg") then
                Limb:Destroy()
            end 
        end
    end
end)

AddCmd({"nobody","detachbody","dropbody"},"",function()
    if CheckR15(LPlayer) then
        LCharacter.LowerTorso.Root:Destroy()
    else
        GetRoot(LCharacter).RootJoint:Destroy()
    end
end)

AddCmd({"noarms","deletearms"},"",function()
    if CheckR15(LPlayer) then
        for _,Limb in pairs(LCharacter:GetChildren()) do
            if Limb:IsA("BasePart") and (Limb.Name == "RightUpperArm" or Limb.Name == "LeftUpperArm") then
                Limb:Destroy()
            end
        end
    else
        for _,Limb in pairs(LCharacter:GetChildren()) do
            if Limb:IsA("BasePart") and (Limb.Name == "Right Arm" or Limb.Name == "Left Arm") then
                Limb:Destroy()
            end 
        end
    end
end)

AddCmd("equiptools","",function()
    for _,Tool in pairs(LPlayer.Backpack:GetChildren()) do
        if Tool:IsA("Tool") then
            Tool.Parent = LCharacter
        end
    end
end)

AddCmd("unequiptools","",function()
    LCharacter.Humanoid:UnequipTools()
end)

AddCmd("drophats","",function()
    for _,Hat in pairs(LCharacter.Humanoid:GetAccessories()) do
        Hat.Handle.CanCollide = true
        Hat.Handle.AccessoryWeld:Destroy()
    end
end)

AddCmd({"nohats","removehats","deletehats"},"",function()
    for _,Hat in pairs(LCharacter:GetDescendants()) do
        if Hat:IsA("Accessory") then
            for _,Weld in pairs(Hat:GetDescendants()) do
                if Weld:IsA("Weld") then
                    Weld:Destroy()
                end
            end
        end
    end
end)

AddCmd("droptools","",function()
    for _,Tool in pairs(LPlayer.Backpack:GetChildren()) do
        if Tool:IsA("Tool") then
            Tool.Parent = LCharacter
        end
    end
    wait()
    for _,Tool in pairs(LCharacter:GetChildren()) do
        if Tool:IsA("Tool") then
            v.Parent = workspace
        end
    end
end)

AddCmd({"chatlogs","clogs"},"",function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/rinqedd/rblx/main/random/Chatlogs"))()
    Notify("Chatlogs","Credit to V3rtices on V3rmillion.")
end)

AddCmd({"walkspeed","speed","ws"},"[number] (e.g 16)",function(Speed)
    LCharacter.Humanoid.WalkSpeed = Speed
end)

AddCmd("jumppower","[number] (e.g 50)",function(Jump)
    LCharacter.Humanoid.JumpPower = Jump
end)

AddCmd("sit","",function()
    LCharacter.Humanoid.Sit = true
end)

AddCmd({"tpposition","tppos"},"[position] (e.g 50,50,50)",function(Position)
    local Split = string.split(Position,",")
    if #Split == 3 then
        GetRoot(LCharacter).CFrame = CFrame.new(unpack(Split))
    end
end)

AddCmd({"tweenposition","tweenpos","ttpos"},"[position] (e.g 50,50,50)",function(Position,Speed)
    local Split = string.split(Position,",")
    if #Split == 3 then
        local OldPosition = GetRoot(LCharacter).Position
        local NewPosition = Vector3.new(unpack(Split))
        local Time = (OldPosition-NewPosition).magnitude/Speed
        local TweenInfo = TweenInfo.new(
        	Time,
        	Enum.EasingStyle.Linear,
        	Enum.EasingDirection.Out, 
        	0,
        	false,
        	0
        )
        local Tween = game.TweenService:Create(GetRoot(LCharacter),TweenInfo,{CFrame = CFrame.new(NewPosition)})
        Tween:Play()
    end
end)

AddCmd({"view","spectate","watch"},"[username] (e.g exampleUser123)",function(Player)
    local Target = Players[GetPlrFromName(Player)]
    local Continue = true
    if Target then
        Player = Target
    end
    workspace.CurrentCamera.CameraSubject = Player.Character
    Notify("Spectate","Viewing "..Player.Name)
    Player.Character.Humanoid:GetPropertyChangedSignal("Health"):Connect(function()
        if Player.Character.Humanoid.Health == 0 then
            if Continue then
                Continue = false
                workspace.CurrentCamera.CameraSubject = LCharacter
            end
        end
    end)
    Player.CharacterRemoving:Connect(function(_)
        if Continue then
            workspace.CurrentCamera.CameraSubject = LCharacter
            Continue = false
        end
    end)
end)

AddCmd({"unview","unspectate","unwatch"},"",function()
    workspace.CurrentCamera.CameraSubject = LCharacter
end)

AddCmd({"xray"},"",function()
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") and not v.Parent.Parent:FindFirstChild("Humanoid") then
            v.Transparency = 0.5
        end
    end
end)

AddCmd({"noxray","unxray"},"",function()
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") and not v.Parent.Parent:FindFirstChild("Humanoid") then
            v.Transparency = 0
        end
    end
end)

AddCmd({"antiafk","antiidle"},"",function()
    local VirtualUser = game:GetService("VirtualUser")
    LPlayer.Idled:connect(function()
        VirtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
        wait(1)
        VirtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    end)
end)

AddCmd({"prefix","changeprefix"},"",function(NewPrefix)
    CommandText.PlaceholderText = "Press "..Prefix.." to focus command bar"
end)

local CommandHolder = Instance.new("Folder",game.CoreGui)
CommandHolder.Name = "CommandHolder"

for Cmd,Table in pairs(Commands) do
    if not Table["ALIAS"] then
        local CmdExample = Command:Clone()
        CmdExample.Parent = CommandListText
        CmdExample.Name = Cmd
        CmdExample.Text = CmdExample.Text..Cmd.." "..Table["EXAMPLE"]
    end
end

function FilterCmd(Cmd)
    Cmd = Cmd:lower()
    
    for _,v in pairs(CommandHolder:GetChildren()) do
		if v:IsA("TextLabel") and v.Text:lower():match("^"..Cmd) then
			v.Parent = CommandListText
		end
	end
	for _,v in pairs(CommandListText:GetChildren()) do
		if v:IsA("TextLabel") and not v.Text:lower():match("^"..Cmd) then
			v.Parent = CommandHolder
		end
	end
end

CmdText:GetPropertyChangedSignal("Text"):Connect(function()
    FilterCmd(CmdText.Text)
end)

Notify("Loaded!","Press Semi-Colon ( ; ) to load the gui.")
